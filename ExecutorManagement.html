<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Homi - Executor Management</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
        <link rel="stylesheet" href="styles/executormanagement.css">

  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full w-full">
  <div class="page-wrapper"><!-- Header -->
   <header class="page-header">
    <div class="header-content">
     <div class="header-top">
      <div>
       <h1 class="page-title page-title-text">Executor Management</h1>
       <p class="page-subtitle page-subtitle-text">Manage and track your service executors</p>
      </div><button class="btn-primary">
       <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19" /> <line x1="5" y1="12" x2="19" y2="12" />
       </svg> Add Executor </button>
     </div><!-- Search Bar -->
     <div class="search-bar"><span class="search-icon">
       <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8" /> <path d="m21 21-4.35-4.35" />
       </svg></span> <input type="text" class="search-input" id="searchInput" placeholder="Search executors by name, specialty, or location...">
     </div><!-- Filter Tabs -->
     <div class="filter-tabs">
      <div class="filter-tab active" data-filter="all"><span class="filter-all-text">All</span> <span class="filter-count" id="countAll">0</span>
      </div>
      <div class="filter-tab" data-filter="available"><span class="filter-available-text">Available</span> <span class="filter-count" id="countAvailable">0</span>
      </div>
      <div class="filter-tab" data-filter="busy"><span class="filter-busy-text">Busy</span> <span class="filter-count" id="countBusy">0</span>
      </div>
      <div class="filter-tab" data-filter="offline"><span class="filter-offline-text">Offline</span> <span class="filter-count" id="countOffline">0</span>
      </div>
     </div>
    </div>
   </header><!-- Main Content -->
   <main class="page-main"><!-- Summary Cards -->
    <div class="summary-grid">
     <div class="summary-card">
      <div class="summary-icon blue">
       <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" /> <circle cx="9" cy="7" r="4" /> <path d="M23 21v-2a4 4 0 0 0-3-3.87" /> <path d="M16 3.13a4 4 0 0 1 0 7.75" />
       </svg>
      </div>
      <div class="summary-label total-executors-label-text">
       Total Executors
      </div>
      <div class="summary-value" id="totalExecutors">
       0
      </div>
     </div>
     <div class="summary-card">
      <div class="summary-icon green">
       <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10" /> <polyline points="12 6 12 12 16 14" />
       </svg>
      </div>
      <div class="summary-label total-hours-label-text">
       Total Hours
      </div>
      <div class="summary-value" id="totalHours">
       0
      </div>
     </div>
     <div class="summary-card">
      <div class="summary-icon purple">
       <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23" /> <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
       </svg>
      </div>
      <div class="summary-label total-payments-label-text">
       Total Payments
      </div>
      <div class="summary-value" id="totalPayments">
       $0
      </div>
     </div>
    </div><!-- Table Header (Desktop) -->
    <div class="table-header">
     <div class="table-header-cell">
      Executor
     </div>
     <div class="table-header-cell">
      Specialties
     </div>
     <div class="table-header-cell">
      Status
     </div>
     <div class="table-header-cell">
      Hours Worked
     </div>
     <div class="table-header-cell">
      Est. Payment
     </div>
     <div class="table-header-cell">
      Actions
     </div>
    </div><!-- Executor List -->
    <div class="executor-list" id="executorList"><!-- Executor rows will be rendered here -->
    </div><!-- Empty State -->
    <div class="empty-state" id="emptyState" style="display: none;">
     <svg class="empty-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" /> <circle cx="9" cy="7" r="4" /> <path d="M23 21v-2a4 4 0 0 0-3-3.87" /> <path d="M16 3.13a4 4 0 0 1 0 7.75" />
     </svg>
     <h2 class="empty-title">No executors found</h2>
     <p class="empty-message">Try adjusting your search or filter to find what you're looking for.</p>
    </div>
   </main>
  </div>
  <script>
    // Sample executor data
    const executorsData = [
      {
        id: 1,
        name: 'John Smith',
        specialties: ['Cleaning', 'Deep Clean'],
        status: 'available',
        location: 'Downtown',
        rating: 4.9,
        reviews: 127,
        hoursWorked: 45,
        hourlyRate: 45
      },
      {
        id: 2,
        name: 'Sarah Johnson',
        specialties: ['Landscaping', 'Garden'],
        status: 'busy',
        location: 'Suburbs',
        rating: 4.8,
        reviews: 93,
        hoursWorked: 38,
        hourlyRate: 45
      },
      {
        id: 3,
        name: 'Mike Davis',
        specialties: ['Plumbing', 'Repairs'],
        status: 'available',
        location: 'Midtown',
        rating: 4.7,
        reviews: 156,
        hoursWorked: 52,
        hourlyRate: 45
      },
      {
        id: 4,
        name: 'Emma Wilson',
        specialties: ['Renovation', 'Painting'],
        status: 'offline',
        location: 'East Side',
        rating: 4.9,
        reviews: 89,
        hoursWorked: 41,
        hourlyRate: 45
      },
      {
        id: 5,
        name: 'Alex Brown',
        specialties: ['Electrical', 'HVAC'],
        status: 'available',
        location: 'West End',
        rating: 4.8,
        reviews: 112,
        hoursWorked: 48,
        hourlyRate: 45
      },
      {
        id: 6,
        name: 'Lisa Martinez',
        specialties: ['Cleaning', 'Organization'],
        status: 'busy',
        location: 'Downtown',
        rating: 5.0,
        reviews: 74,
        hoursWorked: 35,
        hourlyRate: 45
      }
    ];

    // State
    let currentFilter = 'all';
    let searchQuery = '';

    // Get initials
    function getInitials(name) {
      return name.split(' ').map(n => n[0]).join('').toUpperCase();
    }

    // Format currency
    function formatCurrency(amount) {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2
      }).format(amount);
    }

    // Calculate payment
    function calculatePayment(hours, rate) {
      return hours * rate;
    }

    // Render StatusBadge component
    function renderStatusBadge(status) {
      return `
        <div class="status-badge ${status}">
          <span class="status-dot"></span>
          <span>${status}</span>
        </div>
      `;
    }

    // Render specialty tags
    function renderSpecialtyTags(specialties) {
      return specialties.map(s => `<span class="specialty-tag">${s}</span>`).join('');
    }

    // Render ExecutorRow component
    function renderExecutorRow(executor) {
      const payment = calculatePayment(executor.hoursWorked, executor.hourlyRate);
      
      return `
        <div class="executor-row">
          <div class="executor-content">
            <!-- Executor Info -->
            <div class="executor-info">
              <div class="executor-avatar">${getInitials(executor.name)}</div>
              <div class="executor-details">
                <div class="executor-name">${executor.name}</div>
                <div class="executor-meta">
                  <div class="executor-meta-item">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                      <circle cx="12" cy="10" r="3"/>
                    </svg>
                    <span>${executor.location}</span>
                  </div>
                  <div class="executor-rating">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                    </svg>
                    <span>${executor.rating}</span>
                    <span style="color: #94a3b8;">(${executor.reviews})</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Specialties (Desktop) -->
            <div class="specialty-tags" style="display: none;">
              ${renderSpecialtyTags(executor.specialties)}
            </div>

            <!-- Status (Desktop) -->
            <div style="display: none;">
              ${renderStatusBadge(executor.status)}
            </div>

            <!-- Hours Worked (Desktop) -->
            <div class="stats-display" style="display: none;">
              <div class="stat-label">Hours</div>
              <div class="stat-value">${executor.hoursWorked}h</div>
            </div>

            <!-- Payment (Desktop) -->
            <div class="stats-display" style="display: none;">
              <div class="stat-label">Payment</div>
              <div class="stat-value highlight">${formatCurrency(payment)}</div>
            </div>

            <!-- Mobile Stats -->
            <div class="mobile-stats">
              <div class="stats-display">
                <div class="stat-label">Status</div>
                ${renderStatusBadge(executor.status)}
              </div>
              <div class="stats-display">
                <div class="stat-label">Specialties</div>
                <div class="specialty-tags">
                  ${renderSpecialtyTags(executor.specialties)}
                </div>
              </div>
              <div class="stats-display">
                <div class="stat-label">Hours Worked</div>
                <div class="stat-value">${executor.hoursWorked}h</div>
              </div>
              <div class="stats-display">
                <div class="stat-label">Est. Payment</div>
                <div class="stat-value highlight">${formatCurrency(payment)}</div>
              </div>
            </div>

            <!-- Actions -->
            <div class="executor-actions">
              <button class="action-btn primary">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 11l3 3L22 4"/>
                  <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
                </svg>
                Assign Task
              </button>
              <button class="action-btn secondary">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                Message
              </button>
              <button class="action-btn secondary">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
                Profile
              </button>
            </div>
          </div>
        </div>
      `;
    }

    // Show/hide desktop columns based on screen size
    function updateLayout() {
      const isDesktop = window.innerWidth >= 1024;
      document.querySelectorAll('.executor-row').forEach(row => {
        const desktopCols = row.querySelectorAll('.executor-content > div:not(:first-child):not(.mobile-stats):not(.executor-actions)');
        desktopCols.forEach(col => {
          col.style.display = isDesktop ? 'flex' : 'none';
        });
      });
    }

    // Filter executors
    function getFilteredExecutors() {
      let filtered = executorsData;

      // Apply status filter
      if (currentFilter !== 'all') {
        filtered = filtered.filter(exec => exec.status === currentFilter);
      }

      // Apply search filter
      if (searchQuery) {
        filtered = filtered.filter(exec =>
          exec.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
          exec.location.toLowerCase().includes(searchQuery.toLowerCase()) ||
          exec.specialties.some(s => s.toLowerCase().includes(searchQuery.toLowerCase()))
        );
      }

      return filtered;
    }

    // Update summary cards
    function updateSummary() {
      const totalHours = executorsData.reduce((sum, exec) => sum + exec.hoursWorked, 0);
      const totalPayments = executorsData.reduce((sum, exec) => 
        sum + calculatePayment(exec.hoursWorked, exec.hourlyRate), 0
      );

      document.getElementById('totalExecutors').textContent = executorsData.length;
      document.getElementById('totalHours').textContent = `${totalHours}h`;
      document.getElementById('totalPayments').textContent = formatCurrency(totalPayments);
    }

    // Update counts
    function updateCounts() {
      document.getElementById('countAll').textContent = executorsData.length;
      document.getElementById('countAvailable').textContent = 
        executorsData.filter(e => e.status === 'available').length;
      document.getElementById('countBusy').textContent = 
        executorsData.filter(e => e.status === 'busy').length;
      document.getElementById('countOffline').textContent = 
        executorsData.filter(e => e.status === 'offline').length;
    }

    // Render executors
    function renderExecutors() {
      const executorList = document.getElementById('executorList');
      const emptyState = document.getElementById('emptyState');
      const filteredExecutors = getFilteredExecutors();

      if (filteredExecutors.length === 0) {
        executorList.style.display = 'none';
        emptyState.style.display = 'block';
      } else {
        executorList.style.display = 'block';
        emptyState.style.display = 'none';
        executorList.innerHTML = filteredExecutors.map(renderExecutorRow).join('');
        updateLayout();
      }

      updateSummary();
      updateCounts();
    }

    // Filter tabs
    document.querySelectorAll('.filter-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentFilter = tab.dataset.filter;
        renderExecutors();
      });
    });

    // Search
    document.getElementById('searchInput').addEventListener('input', (e) => {
      searchQuery = e.target.value;
      renderExecutors();
    });

    // Window resize
    window.addEventListener('resize', updateLayout);

    // Config and SDK
    const defaultConfig = {
      background_gradient_start: '#f0f9ff',
      background_gradient_end: '#e0f2fe',
      surface_color: '#ffffff',
      text_color: '#0f172a',
      accent_color: '#3b82f6',
      page_title: 'Executor Management',
      page_subtitle: 'Manage and track your service executors',
      total_executors_label: 'Total Executors',
      total_hours_label: 'Total Hours',
      total_payments_label: 'Total Payments',
      filter_all: 'All',
      filter_available: 'Available',
      filter_busy: 'Busy',
      filter_offline: 'Offline',
      font_family: 'Inter',
      font_size: 16
    };

    async function onConfigChange(config) {
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const baseFontStack = 'system-ui, -apple-system, BlinkMacSystemFont, sans-serif';
      
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;

      // Update text content
      document.querySelector('.page-title-text').textContent = 
        config.page_title || defaultConfig.page_title;
      document.querySelector('.page-subtitle-text').textContent = 
        config.page_subtitle || defaultConfig.page_subtitle;
      document.querySelector('.total-executors-label-text').textContent = 
        config.total_executors_label || defaultConfig.total_executors_label;
      document.querySelector('.total-hours-label-text').textContent = 
        config.total_hours_label || defaultConfig.total_hours_label;
      document.querySelector('.total-payments-label-text').textContent = 
        config.total_payments_label || defaultConfig.total_payments_label;
      document.querySelector('.filter-all-text').textContent = 
        config.filter_all || defaultConfig.filter_all;
      document.querySelector('.filter-available-text').textContent = 
        config.filter_available || defaultConfig.filter_available;
      document.querySelector('.filter-busy-text').textContent = 
        config.filter_busy || defaultConfig.filter_busy;
      document.querySelector('.filter-offline-text').textContent = 
        config.filter_offline || defaultConfig.filter_offline;

      // Update font sizes
      document.querySelector('.page-title').style.fontSize = `${baseSize * 2}px`;
      document.querySelector('.page-subtitle').style.fontSize = `${baseSize * 0.938}px`;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_gradient_start || defaultConfig.background_gradient_start,
              set: (value) => {
                config.background_gradient_start = value;
                window.elementSdk.setConfig({ background_gradient_start: value });
              }
            },
            {
              get: () => config.background_gradient_end || defaultConfig.background_gradient_end,
              set: (value) => {
                config.background_gradient_end = value;
                window.elementSdk.setConfig({ background_gradient_end: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.accent_color || defaultConfig.accent_color,
              set: (value) => {
                config.accent_color = value;
                window.elementSdk.setConfig({ accent_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ['page_title', config.page_title || defaultConfig.page_title],
          ['page_subtitle', config.page_subtitle || defaultConfig.page_subtitle],
          ['total_executors_label', config.total_executors_label || defaultConfig.total_executors_label],
          ['total_hours_label', config.total_hours_label || defaultConfig.total_hours_label],
          ['total_payments_label', config.total_payments_label || defaultConfig.total_payments_label],
          ['filter_all', config.filter_all || defaultConfig.filter_all],
          ['filter_available', config.filter_available || defaultConfig.filter_available],
          ['filter_busy', config.filter_busy || defaultConfig.filter_busy],
          ['filter_offline', config.filter_offline || defaultConfig.filter_offline]
        ])
      });
    }

    // Initialize
    onConfigChange(defaultConfig);
    renderExecutors();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b064318a21613f4',t:'MTc2NjE0MDYyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>