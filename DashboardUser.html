<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Homi - Home Dashboard</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
      <link rel="stylesheet" href="styles/dashboarduser.css">

  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full w-full">
  <div class="app-container"><!-- Header -->
   <header class="app-header">
    <div class="header-content">
     <div class="logo-section">
      <svg class="logo-icon" viewbox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg"><defs>
        <lineargradient id="logo-grad" x1="0%" y1="0%" x2="100%" y2="100%">
         <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
         <stop offset="100%" style="stop-color:#16a34a;stop-opacity:1" />
        </lineargradient>
       </defs> <path d="M100 30L40 80V170H80V130H120V170H160V80L100 30Z" fill="url(#logo-grad)" /> <circle cx="140" cy="60" r="28" fill="#16a34a" /> <path d="M128 60L136 68L154 52" stroke="white" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" />
      </svg><span class="logo-text">Homi</span>
     </div>
     <div class="user-section"><button class="notification-btn" aria-label="Notifications">
       <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" /> <path d="M13.73 21a2 2 0 0 1-3.46 0" />
       </svg><span class="notification-badge"></span> </button>
      <div class="user-avatar user-initial">
       S
      </div>
     </div>
    </div>
   </header><!-- Main Content -->
   <main class="main-content"><!-- Welcome Section -->
    <section class="welcome-section">
     <h1 class="welcome-title page-title">Welcome back, <span class="user-name">Sarah</span>! ðŸ‘‹</h1>
     <p class="welcome-subtitle">Here's what's happening with your tasks today</p>
    </section><!-- Stats Grid -->
    <div class="stats-grid"><!-- Worked Time Card -->
     <article class="stat-card" style="--card-color-1: #3b82f6; --card-color-2: #2563eb;">
      <div class="stat-card-header"><span class="stat-card-label worked-time-label">Today's Time</span>
       <div class="stat-card-icon">
        <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10" /> <polyline points="12 6 12 12 16 14" />
        </svg>
       </div>
      </div>
      <div class="stat-card-value">
       5.5h
      </div>
      <div class="stat-card-subtitle">
       Productive hours logged
      </div><span class="stat-card-trend positive">
       <svg width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15" />
       </svg> +12% from yesterday </span>
     </article><!-- Assigned Tasks Card -->
     <article class="stat-card" style="--card-color-1: #8b5cf6; --card-color-2: #7c3aed;">
      <div class="stat-card-header"><span class="stat-card-label assigned-tasks-label">Assigned Tasks</span>
       <div class="stat-card-icon">
        <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" /> <rect x="8" y="2" width="8" height="4" rx="1" ry="1" /> <path d="m9 14 2 2 4-4" />
        </svg>
       </div>
      </div>
      <div class="stat-card-value">
       12
      </div>
      <div class="stat-card-subtitle">
       3 completed today
      </div><span class="stat-card-trend neutral">
       <svg width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15" />
       </svg> On track </span>
     </article><!-- Available Tasks Card -->
     <article class="stat-card" style="--card-color-1: #16a34a; --card-color-2: #15803d;">
      <div class="stat-card-header"><span class="stat-card-label available-tasks-label">Available Tasks</span>
       <div class="stat-card-icon">
        <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /> <polyline points="22 4 12 14.01 9 11.01" />
        </svg>
       </div>
      </div>
      <div class="stat-card-value">
       8
      </div>
      <div class="stat-card-subtitle">
       New tasks to pick up
      </div><span class="stat-card-trend positive">
       <svg width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15" />
       </svg> +3 new today </span>
     </article>
    </div><!-- Task Lists Section -->
    <div class="tasks-section"><!-- Assigned Tasks List -->
     <section class="task-list-container">
      <div class="task-list-header">
       <h2 class="task-list-title"><span>My Assigned Tasks</span> <span class="task-count-badge" style="--badge-color-1: #8b5cf6; --badge-color-2: #7c3aed;">12</span></h2><button class="view-all-btn">View All â†’</button>
      </div>
      <div class="task-list-items" id="assignedTasksList"><!-- Task items will be rendered here -->
      </div>
     </section><!-- Available Tasks List -->
     <section class="task-list-container">
      <div class="task-list-header">
       <h2 class="task-list-title"><span>Available Tasks</span> <span class="task-count-badge" style="--badge-color-1: #16a34a; --badge-color-2: #15803d;">8</span></h2><button class="view-all-btn">View All â†’</button>
      </div>
      <div class="task-list-items" id="availableTasksList"><!-- Task items will be rendered here -->
      </div>
     </section>
    </div>
   </main>
  </div>
  <script>
    // Sample data
    const assignedTasks = [
      {
        id: 1,
        title: 'Review quarterly budget report',
        project: 'Finance',
        dueDate: '2h',
        priority: 'high',
        completed: false
      },
      {
        id: 2,
        title: 'Update user documentation',
        project: 'Product',
        dueDate: '4h',
        priority: 'medium',
        completed: false
      },
      {
        id: 3,
        title: 'Fix responsive layout issues',
        project: 'Development',
        dueDate: 'Tomorrow',
        priority: 'high',
        completed: false
      },
      {
        id: 4,
        title: 'Team standup meeting',
        project: 'Management',
        dueDate: '30m',
        priority: 'low',
        completed: true
      },
      {
        id: 5,
        title: 'Design new landing page mockup',
        project: 'Design',
        dueDate: '3 days',
        priority: 'medium',
        completed: false
      }
    ];

    const availableTasks = [
      {
        id: 6,
        title: 'Organize team building event',
        project: 'HR',
        dueDate: '1 week',
        priority: 'low',
        completed: false
      },
      {
        id: 7,
        title: 'Conduct user research interviews',
        project: 'Research',
        dueDate: '2 days',
        priority: 'medium',
        completed: false
      },
      {
        id: 8,
        title: 'Write blog post about new features',
        project: 'Marketing',
        dueDate: '5 days',
        priority: 'low',
        completed: false
      },
      {
        id: 9,
        title: 'Audit security permissions',
        project: 'Security',
        dueDate: '1 day',
        priority: 'high',
        completed: false
      }
    ];

    // TaskItem Component
    function createTaskItem(task) {
      const item = document.createElement('div');
      item.className = 'task-item';
      item.onclick = () => toggleTask(task.id);
      
      item.innerHTML = `
        <div class="task-checkbox ${task.completed ? 'checked' : ''}">
          ${task.completed ? `
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
          ` : ''}
        </div>
        <div class="task-content">
          <div class="task-title">${task.title}</div>
          <div class="task-meta">
            <span class="task-meta-item">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              ${task.dueDate}
            </span>
            <span class="task-meta-item">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              ${task.project}
            </span>
            <span class="task-priority ${task.priority}">${task.priority}</span>
          </div>
        </div>
      `;
      
      return item;
    }

    // Toggle task completion
    function toggleTask(taskId) {
      const task = [...assignedTasks, ...availableTasks].find(t => t.id === taskId);
      if (task) {
        task.completed = !task.completed;
        renderTasks();
      }
    }

    // Render tasks
    function renderTasks() {
      const assignedContainer = document.getElementById('assignedTasksList');
      const availableContainer = document.getElementById('availableTasksList');
      
      assignedContainer.innerHTML = '';
      availableContainer.innerHTML = '';
      
      assignedTasks.forEach(task => {
        assignedContainer.appendChild(createTaskItem(task));
      });
      
      availableTasks.forEach(task => {
        availableContainer.appendChild(createTaskItem(task));
      });
    }

    // Config and SDK
    const defaultConfig = {
      background_color: '#f0f9ff',
      primary_color: '#3b82f6',
      accent_color: '#16a34a',
      surface_color: '#ffffff',
      text_color: '#0f172a',
      page_title: 'Welcome back',
      user_name: 'Sarah',
      worked_time_label: "Today's Time",
      assigned_tasks_label: 'Assigned Tasks',
      available_tasks_label: 'Available Tasks',
      font_family: 'Inter',
      font_size: 16
    };

    async function onConfigChange(config) {
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const baseFontStack = 'system-ui, -apple-system, BlinkMacSystemFont, sans-serif';
      
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;

      // Update page title
      const pageTitleEl = document.querySelector('.page-title');
      const userNameSpan = document.querySelector('.user-name');
      const userName = config.user_name || defaultConfig.user_name;
      const pageTitle = config.page_title || defaultConfig.page_title;
      
      pageTitleEl.innerHTML = `${pageTitle}, <span class="user-name">${userName}</span>! ðŸ‘‹`;
      
      // Update user initial
      document.querySelector('.user-initial').textContent = userName.charAt(0).toUpperCase();

      // Update stat labels
      document.querySelector('.worked-time-label').textContent = config.worked_time_label || defaultConfig.worked_time_label;
      document.querySelector('.assigned-tasks-label').textContent = config.assigned_tasks_label || defaultConfig.assigned_tasks_label;
      document.querySelector('.available-tasks-label').textContent = config.available_tasks_label || defaultConfig.available_tasks_label;

      // Update font sizes
      document.querySelector('.welcome-title').style.fontSize = `${baseSize * 2}px`;
      document.querySelector('.welcome-subtitle').style.fontSize = `${baseSize * 1}px`;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.primary_color || defaultConfig.primary_color,
              set: (value) => {
                config.primary_color = value;
                window.elementSdk.setConfig({ primary_color: value });
              }
            },
            {
              get: () => config.accent_color || defaultConfig.accent_color,
              set: (value) => {
                config.accent_color = value;
                window.elementSdk.setConfig({ accent_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ['page_title', config.page_title || defaultConfig.page_title],
          ['user_name', config.user_name || defaultConfig.user_name],
          ['worked_time_label', config.worked_time_label || defaultConfig.worked_time_label],
          ['assigned_tasks_label', config.assigned_tasks_label || defaultConfig.assigned_tasks_label],
          ['available_tasks_label', config.available_tasks_label || defaultConfig.available_tasks_label]
        ])
      });
    }

    // Initialize
    onConfigChange(defaultConfig);
    renderTasks();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b05b22b148e698e',t:'MTc2NjEzNDY4My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>