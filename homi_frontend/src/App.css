/* ═══════════════════════════════════════════════════════════════════════════
   Homi Design System — Component & Pattern Utilities
   Reusable patterns for cards, buttons, skeletons, and interactive states
   ═══════════════════════════════════════════════════════════════════════════ */

@tailwind components;
@tailwind utilities;

@layer components {

  /* ─── Card patterns ──────────────────────────────────────────────────── */

  .card-base {
    @apply bg-white rounded-xl border border-surface-200/60;
    box-shadow: var(--shadow-sm);
    transition: box-shadow var(--duration-normal) var(--ease-smooth),
                transform var(--duration-normal) var(--ease-smooth);
  }

  .card-interactive {
    @apply card-base cursor-pointer;
  }

  .card-interactive:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
  }

  .card-interactive:active {
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
  }

  .card-elevated {
    @apply bg-white rounded-xl;
    box-shadow: var(--shadow-md);
  }

  /* ─── Button enhancements ────────────────────────────────────────────── */

  .btn-press:active {
    transform: scale(0.97);
  }

  .btn-press-sm:active {
    transform: scale(0.98);
  }

  /* ─── Input patterns ──────────────────────────────────────────────────── */

  .input-base {
    @apply w-full px-3.5 py-2.5 rounded-lg border border-surface-300 bg-white
           text-surface-900 placeholder-surface-400
           transition-all duration-200;
  }

  .input-base:focus {
    @apply border-primary-500 ring-2 ring-primary-500/10 outline-none;
  }

  .input-error {
    @apply border-red-400 ring-2 ring-red-500/10;
  }

  /* ─── Skeleton loading ────────────────────────────────────────────────── */

  .skeleton {
    @apply relative overflow-hidden bg-surface-100 rounded-lg;
  }

  .skeleton::after {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(
      90deg,
      transparent,
      rgb(255 255 255 / 0.5),
      transparent
    );
    animation: shimmer 2s infinite;
    transform: translateX(-100%);
  }

  /* ─── Badge patterns ──────────────────────────────────────────────────── */

  .badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5
           text-xs font-medium rounded-full;
  }

  .badge-primary {
    @apply badge bg-primary-50 text-primary-700 ring-1 ring-inset ring-primary-200;
  }

  .badge-success {
    @apply badge bg-success-50 text-success-700 ring-1 ring-inset ring-success-200;
  }

  .badge-warning {
    @apply badge bg-amber-50 text-amber-700 ring-1 ring-inset ring-amber-200;
  }

  .badge-danger {
    @apply badge bg-red-50 text-red-700 ring-1 ring-inset ring-red-200;
  }

  .badge-neutral {
    @apply badge bg-surface-100 text-surface-600 ring-1 ring-inset ring-surface-200;
  }

  /* ─── Divider ────────────────────────────────────────────────────────── */

  .divider {
    @apply border-t border-surface-200/80;
  }

  /* ─── Hover underline (nav links, Notion-style) ──────────────────────── */

  .hover-underline {
    @apply relative;
  }

  .hover-underline::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5 bg-primary-500 rounded-full;
    transition: width var(--duration-normal) var(--ease-smooth);
  }

  .hover-underline:hover::after {
    @apply w-full;
  }

  /* ─── Dot indicator ──────────────────────────────────────────────────── */

  .dot {
    @apply w-2 h-2 rounded-full;
  }

  .dot-pulse {
    @apply dot animate-pulse-subtle;
  }

  /* ─── Section container ──────────────────────────────────────────────── */

  .section-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* ─── Page header ────────────────────────────────────────────────────── */

  .page-header {
    @apply mb-6 sm:mb-8;
  }

  .page-title {
    @apply text-2xl sm:text-3xl font-bold text-surface-900 tracking-tight;
  }

  .page-subtitle {
    @apply mt-1 text-surface-500 text-sm sm:text-base;
  }

  /* ─── Dropdown / Popover ─────────────────────────────────────────────── */

  .dropdown-menu {
    @apply absolute right-0 mt-2 w-56 rounded-xl bg-white ring-1 ring-surface-200/60
           py-1 animate-scale-in origin-top-right;
    box-shadow: var(--shadow-lg);
  }

  .dropdown-item {
    @apply flex items-center gap-2.5 w-full px-3.5 py-2.5 text-sm text-surface-700
           transition-colors duration-150;
  }

  .dropdown-item:hover {
    @apply bg-surface-50 text-surface-900;
  }

  /* ─── Tooltip ────────────────────────────────────────────────────────── */

  .tooltip {
    @apply absolute z-50 px-2.5 py-1.5 text-xs font-medium
           bg-surface-900 text-white rounded-lg
           animate-fade-in pointer-events-none whitespace-nowrap;
    box-shadow: var(--shadow-md);
  }
}

/* ─── Reduced motion ───────────────────────────────────────────────────── */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
